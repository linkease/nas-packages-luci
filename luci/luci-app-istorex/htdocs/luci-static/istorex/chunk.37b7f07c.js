var F=(w,f,c)=>new Promise((l,t)=>{var h=d=>{try{i(c.next(d))}catch(D){t(D)}},o=d=>{try{i(c.throw(d))}catch(D){t(D)}},i=d=>d.done?l(d.value):Promise.resolve(d.value).then(h,o);i((c=c.apply(w,f)).next())});import{_ as S,d as C,r as M,x as A,M as V,o as v,c as m,f as e,w as r,y as B,F as b,j as _,h as I,e as U,t as T,g as q,i as P,T as G}from"./index.js?v=bd1b282f";const L=e("div",{class:"label-info"}," \u8BF7\u786E\u4FDD\u60A8\u5DF2\u5C06\u8DEF\u7531 WAN \u53E3\u8FDE\u63A5\u5230\u4E0A\u7EA7\u8DEF\u7531\u5C40\u57DF\u7F51\uFF08 LAN \uFF09\u63A5\u53E3 ",-1),W=e("div",{class:"label-name"},[e("span",null,"WAN \u63A5\u53E3\u914D\u7F6E\u65B9\u5F0F")],-1),j={class:"label-value"},H=e("option",{value:"dhcp"},"\u81EA\u52A8\u83B7\u53D6 IP \u5730\u5740\uFF08DHCP\uFF09",-1),O=e("option",{value:"static"},"\u9759\u6001 IP \u5730\u5740",-1),z=[H,O],J=e("div",{class:"label-name"},[e("span",null,"IP\u5730\u5740")],-1),K={class:"label-value"},Q=e("div",{class:"label-name"},[e("span",null,"\u5B50\u7F51\u63A9\u7801")],-1),R={class:"label-value"},X=e("div",{class:"label-name"},[e("span",null,"\u7F51\u5173\u5730\u5740")],-1),Y={class:"label-value"},Z=e("div",{class:"label-name"},[e("span",null,"DNS \u914D\u7F6E\u65B9\u5F0F")],-1),$={class:"label-value"},tt=e("option",{value:"auto"},"\u81EA\u52A8\u83B7\u53D6\uFF08DHCP\uFF09",-1),et=e("option",{value:"manual"},"\u624B\u52A8\u914D\u7F6E",-1),at=[tt,et],st=e("div",{class:"label-name"},[e("span",null,"DNS\u670D\u52A1\u5668")],-1),ut={class:"label-value"},nt=["onUpdate:modelValue"],lt=e("div",{class:"label-name"},[e("span",null,"DNS\u670D\u52A1\u5668")],-1),ot={class:"label-value"},it=e("div",{class:"label-name"}," \u5907\u7528DNS\u670D\u52A1\u5668 ",-1),dt={class:"label-value"},rt={class:"label-btns"},ct=["disabled"],pt={key:2,class:"label-msg"},vt=C({__name:"index",setup(w){return F(this,null,function*(){let f,c;const l=M(""),t=A({wanProto:"dhcp",dnsProto:"auto",staticIp:"",subnetMask:"",manualDnsIp:[],gateway:""}),h=A({staticIP:""}),o=A({dnsAddr1:"",dnsAddr2:""}),i=M(!1),d=()=>F(this,null,function*(){i.value=!0;try{const u=yield Promise.all([P.Guide.ClientModel.GET(),P.Network.Status.GET()]);if(u[0]){const s=u[0],{result:a,error:n}=s.data;if(a){const{wanProto:p,dnsProto:y,staticIp:k,subnetMask:g,gateway:E,manualDnsIp:x}=a;p&&(t.wanProto=p),y&&(t.dnsProto=y),k&&(t.staticIp=k),g&&(t.subnetMask=g),E&&(t.gateway=E),x&&(t.manualDnsIp=x||[])}n&&(l.value=n)}if(u[1]){const s=u[1],{result:a,error:n}=s.data;a&&a.ipv4addr&&(h.staticIP=a.ipv4addr),n&&(l.value=n)}}catch(u){l.value=u}i.value=!1});[f,c]=V(()=>d()),yield f,c();const D=u=>{u.target.value=="static"&&((t.staticIp==null||t.staticIp=="")&&(t.staticIp=h.staticIP),(t.subnetMask==null||t.subnetMask=="")&&(t.subnetMask="255.255.255.0"))},N=()=>F(this,null,function*(){const u={};switch(t.wanProto){case"dhcp":break;case"static":u.staticIp=t.staticIp,u.subnetMask=t.subnetMask,u.gateway=t.gateway;break}switch(t.dnsProto){case"auto":break;case"manual":u.manualDnsIp=[],t.manualDnsIp!=null&&t.manualDnsIp.length>0?u.manualDnsIp=t.manualDnsIp:(u.manualDnsIp.push(o.dnsAddr1),o.dnsAddr2&&u.manualDnsIp.push(o.dnsAddr2));break}u.dnsProto=t.dnsProto,u.wanProto=t.wanProto,i.value=!0;const s=G.Loading("\u4FDD\u5B58\u4E2D...");try{const a=yield P.Guide.ClientModel.POST(u);if(a!=null&&a.data){const{success:n,error:p}=a==null?void 0:a.data;p&&(l.value=p),(n==null||n==0)&&(l.value="\u914D\u7F6E\u5B8C\u6210")}}catch(a){l.value=a}i.value=!1,s.Close()});return(u,s)=>(v(),m("form",{class:"form-container",onSubmit:q(N,["prevent"])},[L,W,e("div",j,[r(e("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>t.wanProto=a),onInput:D},[...z],544),[[B,t.wanProto]])]),t.wanProto=="static"?(v(),m(b,{key:0},[J,e("div",K,[r(e("input",{type:"text",placeholder:"ip\u5730\u5740","onUpdate:modelValue":s[1]||(s[1]=a=>t.staticIp=a),required:""},null,512),[[_,t.staticIp,void 0,{trim:!0}]])]),Q,e("div",R,[r(e("input",{type:"text",placeholder:"\u5B50\u7F51\u63A9\u7801\u5730\u5740","onUpdate:modelValue":s[2]||(s[2]=a=>t.subnetMask=a),required:""},null,512),[[_,t.subnetMask,void 0,{trim:!0}]])]),X,e("div",Y,[r(e("input",{type:"text",placeholder:"\u7F51\u5173\u5730\u5740","onUpdate:modelValue":s[3]||(s[3]=a=>t.gateway=a),required:""},null,512),[[_,t.gateway,void 0,{trim:!0}]])])],64)):I("v-if",!0),Z,e("div",$,[r(e("select",{"onUpdate:modelValue":s[4]||(s[4]=a=>t.dnsProto=a)},[...at],512),[[B,t.dnsProto]])]),t.dnsProto=="manual"?(v(),m(b,{key:1},[t.manualDnsIp!=null&&t.manualDnsIp.length>0?(v(!0),m(b,{key:0},U(t.manualDnsIp,(a,n)=>(v(),m(b,null,[st,e("div",ut,[r(e("input",{type:"text",placeholder:"DNS\u670D\u52A1\u5668\u5730\u5740","onUpdate:modelValue":p=>t.manualDnsIp[n]=p},null,8,nt),[[_,t.manualDnsIp[n],void 0,{trim:!0}]])])],64))),256)):(v(),m(b,{key:1},[lt,e("div",ot,[r(e("input",{type:"text",placeholder:"\u4E3BDNS\u670D\u52A1\u5668\u5730\u5740","onUpdate:modelValue":s[5]||(s[5]=a=>o.dnsAddr1=a),required:""},null,512),[[_,o.dnsAddr1,void 0,{trim:!0}]])]),it,e("div",dt,[r(e("input",{type:"text",placeholder:"\u5907\u7528DNS\u670D\u52A1\u5668\u5730\u5740","onUpdate:modelValue":s[6]||(s[6]=a=>o.dnsAddr2=a)},null,512),[[_,o.dnsAddr2,void 0,{trim:!0}]])])],64))],64)):I("v-if",!0),e("div",rt,[e("button",{class:"sumbit",disabled:i.value},"\u4FDD\u5B58",8,ct)]),l.value?(v(),m("div",pt,[e("span",null,T(l.value),1)])):I("v-if",!0)],32))})}});var Dt=S(vt,[["__file","/projects/github/linkease/istorex/web/src/pages/router/network/dhcp/index.vue"]]);export{Dt as default};
