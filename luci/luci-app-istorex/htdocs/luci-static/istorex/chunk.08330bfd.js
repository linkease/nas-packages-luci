var A=(w,F,c)=>new Promise((l,t)=>{var h=i=>{try{d(c.next(i))}catch(_){t(_)}},o=i=>{try{d(c.throw(i))}catch(_){t(_)}},d=i=>i.done?l(i.value):Promise.resolve(i.value).then(h,o);d((c=c.apply(w,F)).next())});import{d as S,s as M,j as f,v as x,o as m,c as v,a,x as r,D as C,F as b,A as D,l as I,E as V,t as U,B as T,C as P,T as q}from"./index.js?v=068cfe92";const G=a("div",{class:"label-info"}," \u8BF7\u786E\u4FDD\u60A8\u5DF2\u5C06\u8DEF\u7531 WAN \u53E3\u8FDE\u63A5\u5230\u4E0A\u7EA7\u8DEF\u7531\u5C40\u57DF\u7F51\uFF08 LAN \uFF09\u63A5\u53E3 ",-1),L=a("div",{class:"label-name"},[a("span",null,"WAN \u63A5\u53E3\u914D\u7F6E\u65B9\u5F0F")],-1),W={class:"label-value"},H=a("option",{value:"dhcp"},"\u81EA\u52A8\u83B7\u53D6 IP \u5730\u5740\uFF08DHCP\uFF09",-1),j=a("option",{value:"static"},"\u9759\u6001 IP \u5730\u5740",-1),O=[H,j],z=a("div",{class:"label-name"},[a("span",null,"IP\u5730\u5740")],-1),J={class:"label-value"},K=a("div",{class:"label-name"},[a("span",null,"\u5B50\u7F51\u63A9\u7801")],-1),Q={class:"label-value"},R=a("div",{class:"label-name"},[a("span",null,"\u7F51\u5173\u5730\u5740")],-1),X={class:"label-value"},Y=a("div",{class:"label-name"},[a("span",null,"DNS \u914D\u7F6E\u65B9\u5F0F")],-1),Z={class:"label-value"},$=a("option",{value:"auto"},"\u81EA\u52A8\u83B7\u53D6\uFF08DHCP\uFF09",-1),tt=a("option",{value:"manual"},"\u624B\u52A8\u914D\u7F6E",-1),at=[$,tt],st=a("div",{class:"label-name"},[a("span",null,"DNS\u670D\u52A1\u5668")],-1),et={class:"label-value"},ut=["onUpdate:modelValue"],nt=a("div",{class:"label-name"},[a("span",null,"DNS\u670D\u52A1\u5668")],-1),lt={class:"label-value"},ot=a("div",{class:"label-name"}," \u5907\u7528DNS\u670D\u52A1\u5668 ",-1),dt={class:"label-value"},it={class:"label-btns"},rt=["disabled"],ct={key:2,class:"label-msg"},vt=S({__name:"index",setup(w){return A(this,null,function*(){let F,c;const l=M(""),t=f({wanProto:"dhcp",dnsProto:"auto",staticIp:"",subnetMask:"",manualDnsIp:[],gateway:""}),h=f({staticIP:""}),o=f({dnsAddr1:"",dnsAddr2:""}),d=M(!1),i=()=>A(this,null,function*(){d.value=!0;try{const u=yield Promise.all([P.Guide.ClientModel.GET(),P.Network.Status.GET()]);if(u[0]){const e=u[0],{result:s,error:n}=e.data;if(s){const{wanProto:p,dnsProto:y,staticIp:k,subnetMask:E,gateway:g,manualDnsIp:B}=s;p&&(t.wanProto=p),y&&(t.dnsProto=y),k&&(t.staticIp=k),E&&(t.subnetMask=E),g&&(t.gateway=g),B&&(t.manualDnsIp=B||[])}n&&(l.value=n)}if(u[1]){const e=u[1],{result:s,error:n}=e.data;s&&s.ipv4addr&&(h.staticIP=s.ipv4addr),n&&(l.value=n)}}catch(u){l.value=u}d.value=!1});[F,c]=x(()=>i()),yield F,c();const _=u=>{u.target.value=="static"&&((t.staticIp==null||t.staticIp=="")&&(t.staticIp=h.staticIP),(t.subnetMask==null||t.subnetMask=="")&&(t.subnetMask="255.255.255.0"))},N=()=>A(this,null,function*(){const u={};switch(t.wanProto){case"dhcp":break;case"static":u.staticIp=t.staticIp,u.subnetMask=t.subnetMask,u.gateway=t.gateway;break}switch(t.dnsProto){case"auto":break;case"manual":u.manualDnsIp=[],t.manualDnsIp!=null&&t.manualDnsIp.length>0?u.manualDnsIp=t.manualDnsIp:(u.manualDnsIp.push(o.dnsAddr1),o.dnsAddr2&&u.manualDnsIp.push(o.dnsAddr2));break}u.dnsProto=t.dnsProto,u.wanProto=t.wanProto,d.value=!0;const e=q.Loading("\u4FDD\u5B58\u4E2D...");try{const s=yield P.Guide.ClientModel.POST(u);if(s!=null&&s.data){const{success:n,error:p}=s==null?void 0:s.data;p&&(l.value=p),(n==null||n==0)&&(l.value="\u914D\u7F6E\u5B8C\u6210")}}catch(s){l.value=s}d.value=!1,e.Close()});return(u,e)=>(m(),v("form",{class:"form-container",onSubmit:T(N,["prevent"])},[G,L,a("div",W,[r(a("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>t.wanProto=s),onInput:_},O,544),[[C,t.wanProto]])]),t.wanProto=="static"?(m(),v(b,{key:0},[z,a("div",J,[r(a("input",{type:"text",placeholder:"ip\u5730\u5740","onUpdate:modelValue":e[1]||(e[1]=s=>t.staticIp=s),required:""},null,512),[[D,t.staticIp,void 0,{trim:!0}]])]),K,a("div",Q,[r(a("input",{type:"text",placeholder:"\u5B50\u7F51\u63A9\u7801\u5730\u5740","onUpdate:modelValue":e[2]||(e[2]=s=>t.subnetMask=s),required:""},null,512),[[D,t.subnetMask,void 0,{trim:!0}]])]),R,a("div",X,[r(a("input",{type:"text",placeholder:"\u7F51\u5173\u5730\u5740","onUpdate:modelValue":e[3]||(e[3]=s=>t.gateway=s),required:""},null,512),[[D,t.gateway,void 0,{trim:!0}]])])],64)):I("",!0),Y,a("div",Z,[r(a("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>t.dnsProto=s)},at,512),[[C,t.dnsProto]])]),t.dnsProto=="manual"?(m(),v(b,{key:1},[t.manualDnsIp!=null&&t.manualDnsIp.length>0?(m(!0),v(b,{key:0},V(t.manualDnsIp,(s,n)=>(m(),v(b,null,[st,a("div",et,[r(a("input",{type:"text",placeholder:"DNS\u670D\u52A1\u5668\u5730\u5740","onUpdate:modelValue":p=>t.manualDnsIp[n]=p},null,8,ut),[[D,t.manualDnsIp[n],void 0,{trim:!0}]])])],64))),256)):(m(),v(b,{key:1},[nt,a("div",lt,[r(a("input",{type:"text",placeholder:"\u4E3BDNS\u670D\u52A1\u5668\u5730\u5740","onUpdate:modelValue":e[5]||(e[5]=s=>o.dnsAddr1=s),required:""},null,512),[[D,o.dnsAddr1,void 0,{trim:!0}]])]),ot,a("div",dt,[r(a("input",{type:"text",placeholder:"\u5907\u7528DNS\u670D\u52A1\u5668\u5730\u5740","onUpdate:modelValue":e[6]||(e[6]=s=>o.dnsAddr2=s)},null,512),[[D,o.dnsAddr2,void 0,{trim:!0}]])])],64))],64)):I("",!0),a("div",it,[a("button",{class:"sumbit",disabled:d.value},"\u4FDD\u5B58",8,rt)]),l.value?(m(),v("div",ct,[a("span",null,U(l.value),1)])):I("",!0)],32))})}});export{vt as default};
